# 思考问题

1. 在实际使用 Kubernetes 的过程中，相比于编写一个单独的 Pod 的 YAML 文件，我一定会推荐你使用一个 replicas=1 的 Deployment。请问，这两者有什么区别呢？

   

   ```
   推荐使用replica=1而不使用单独pod的主要原因是pod所在的节点出故障的时候 pod可以调度到健康的节点上，单独的pod只能在节点健康的情况下由kubelet保证pod的健康状况。
   ```

2. 除了 Network Namespace 外，Pod 里的容器还可以共享哪些 Namespace 呢？你能说出共享这些 Namesapce 的具体应用场景吗？

   ```
   它们共享 PID、IPC、Network、Mount 和 UTS namespace.
   ```

   | namespace         | 具体场景                                                     |
   | ----------------- | ------------------------------------------------------------ |
   | PID namespace     | 用来隔离进程的 PID 空间，使得不同 PID namespace 里的进程 PID 可以重复且互不影响。 可以实现容器内进程的暂停/恢复等功能，还可以支持容器在跨主机的迁移前后保持内部进程的 PID 不发生变化。<br />（在POD中则对应为同一POD内的不同容器可以看到对方的进程ID。默认不是共享的，可以设置POD的`shareProcessNamespace`这个值为true来进行共享，默认为false。） |
   | IPC namespace     | 进程间通信名称空间，IPC的隔离就是阻断进程间通信，主要是信号量、队列和共享内存。 |
   | Network namespace | 网络名称空间，同一主机上的不同进程可以进行localhost或者本地unix socket通信。在单独启动容器的时候不同容器是隔离的，但是在POD中不同容器通过一个Infra容器来进行共享网络名称空间，其原理是其他用户自己定义的容器都Join这个Infra容器的网络。 |
   | UTS namespace     | 主机名名称空间，保存内核名称、版本以及主机名和域名。         |
   | Mount namespace   | Mount名称空间，提供对磁盘挂载点和文件系统的隔离能力。同一主机上的不同进程访问相同的路径会得到相同的内容，因为它们共享本地主机的磁盘和文件系统。 |

   

3. 能否举出一些 Pod（即容器）的状态是 Running，但是应用其实已经停止服务的例子？

   

4. 这两者之间（Running 和 Ready）是有区别的

5. Kubernetes 的 livenessProbe 和 readinessProbe 提供的几种探测机制

6. Kubernetes 使用的这个“控制器模式”，跟我们平常所说的“事件驱动”，有什么区别和联系吗？

7. 对于一个 Deployment 所管理的 Pod，它的 ownerReference 是谁？

8. 你听说过金丝雀发布（Canary Deployment）和蓝绿发布（Blue-Green Deployment）吗？你能说出它们是什么意思吗？

   ```
   金丝雀部署：优先发布一台或少量机器升级，等验证无误后再更新其他机器。优点是用户影响范围小，不足之处是要额外控制如何做自动更新。
   蓝绿部署：2组机器，蓝代表当前的V1版本，绿代表已经升级完成的V2版本。通过LB将流量全部导入V2完成升级部署。优点是切换快速，缺点是影响全部用户。
   ```

9. 你觉得这些应用实例之间的拓扑关系，能否借助这种为 Pod 实例编号的方式表达出来呢？如果不能，你觉得 Kubernetes 还应该为你提供哪些支持来管理这个拓扑状态呢？

10. 